{% load static %}
<!DOCTYPE html>
<html lang="en">

<head>
	<script>
		/*
		* show and hide descriptions for services
		*/
		showHideDesc = function (id, ctx) {
			var approvedNum = id;
			var descNum = "desc" + id;
			var dropText = "more" + id;
			var origin = window.location.protocol + "//" + window.location.host + ctx;
			if (document.getElementById(approvedNum).alt == "image of plus symbol") {
				document.getElementById(approvedNum).src = "{% static 'icons/minus-grey.png' %}";
				document.getElementById(approvedNum).alt = "image of minus symbol";
				document.getElementById(descNum).style.display = "block";
				document.getElementById(dropText).alt = "less" + id;
				document.getElementById(dropText).title = "Click to minimize";
				document.getElementById(dropText).innerHTML = "less info >";
			} else {
				document.getElementById(approvedNum).src = "{% static 'icons/plus-grey.png' %}";
				document.getElementById(approvedNum).alt = "image of plus symbol";
				document.getElementById(descNum).style.display = "none";
				document.getElementById(dropText).alt = "more" + id;
				document.getElementById(dropText).title = "Click to learn more"
				document.getElementById(dropText).innerHTML = "more info >";
			}
		};
		
	</script>

	<title>USPS Business Partner Registration</title>
	<meta name="keywords" content="" />
	<meta name="description" content="" />

	<link rel="shortcut icon" href="{% static 'icons/favicon.ico' %}" type="image/x-icon">

	<link rel="stylesheet" href="{% static 'styles/common-usps.css' %}" type="text/css" media="all" />
	<link rel="stylesheet" href="{% static 'styles/bcg.css' %}" type="text/css" media="all" />

	<link type="text/css" href="{% static 'styles/bootstrap-iso.css' %}" rel="Stylesheet" />
	<link type="text/css" href="{% static 'styles/redesign.css' %}" rel="Stylesheet" />
	<script type="text/javascript" language="javascript" src="{% static 'scripts/jquery.min.js' %}"></script>
	<script type="text/javascript" language="javascript" src="{% static 'scripts/bpg.js' %}"></script>
	<script type="text/javascript" language="javascript"
		src="{% static 'scripts/bootstrap/bootstrap.min.js' %}"></script>
</head>

<body class="claro" id="pageBodyId">
	<!-- begin #page -->
	<div id="page">
		<div class="bootstrap-iso pt-0 mt-0 mb-0 pb-0">
			<nav id="myNavbar" class="navbar " role="navigation">
				<!-- Brand and toggle get grouped for better mobile display -->
				<div class="container-fluid navbar-gradient pt-0 mt-0 mb-0 pb-0">
					<div class="container">
						<div class="row">
							<div class="col-12">
								<div class="nav navbar-header" id="navbarAfterLogin">
									<div class="row navbar-nav mb-0 pb-0" style="padding-top: 1%;">
										<img src="{% static 'images/usps-logo-withouttext.png' %}" class="img-fluid"
											height="20px" width="34px" title="USPS logo"
											alt="USPS logo image of blue eagle" /> <a href="/">
											<img src="{% static 'images/USPS-BusinessPartnerGateway.png' %}"
												class="img-fluid" tabindex="16"
												title="Link to Business Partner Gateway&apos;s Home Page"
												alt="Image for Business Partner Gateway&apos;s Home Page link"
												height="20px" width="335px" />
										</a>
									</div>
								</div>

								<div class="row" style="float: right; margin-right: 3%;">
									<div class="col-12">
										<ul class="nav navbar-nav " id="navbar-display-name"
											style="float: right; padding-right: 0%;">
											<!-- String Logout URLs -->
											<script>var logoutUrls = []</script>
											{% for lst in serviceList %}
											{% if lst.userName %}
											<li style="padding-right: 20px;">
												<span class="navbar-text-blue"> Welcome <b>{{lst.userName}}</b></span>
											</li>
											<li>
												<span class="navbar-text-blue"><a href="javascript:void(0);"
														onclick="logout()">Logout</a></span>
											</li>
											{% endif %}
											{% endfor %}

										</ul>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</nav>

		</div>




		<div id="main">

			<!-- TAB E content-->

			<div class="bootstrap-iso">

				<div class="container">
					<div class="row">
						<div class="col-md-12">
							<h2 class="service-page-title" style="margin-top: 20px;margin-bottom: 20px;">Business
								Partner Registration</h2>
						</div>
					</div>
				</div>

				<div class="container-fluid service-page-area">
					<div class="container service-page-container">
						<div class="row">
							<div class="col-md-8 col-sm-7" style="margin-left: 15px;">
								<div class="hcsIcon left" alt="icon of white truck"></div>
								<h4 class="serviceHeader">Initiate Partner Registration</h4>
								<h6 class="serviceHeader text-justify" style="font-weight: normal; padding-top: 10px;">
									Utilize the form below to invite partners to join our USPS Azure AD Tenant as a
									guest account to gain access to applications.</h6>
							</div>
							<div class="col-md-3 text-right"
								style="float: right; margin-right: 15px; margin-top: 15px;">
								<img title="" width="232" height="150" src="{% static 'images/hcs_image.png' %}"
									alt="image of parked postal trucks">
							</div>
						</div>
						<!-- Check if you are not in Production-->
						{% for lst in serviceList %}
						{% if lst.userName and lst.instanceName != "PROD" %}
						<div class="row" align="center" style="margin-left: 15px; margin-top: 2px;">
							<marquee behavior="alternate" bgcolor="#bb3434" direction="left" loop="7" scrollamount="1"
								scrolldelay="2" width="98%" style="box-shadow: 2px 2px 2px grey;">
								<span style="font-size: 20px;color:#FFFFFF">
									You are accessing a Test Site ({{lst.instanceName}}). Production URL is:
									<a href='https://logistics.usps.com'><span
											style="color:#FFFF00">https://logistics.usps.com</span></a></span>
							</marquee>
						</div>
						{% endif %}
						{% endfor %}
						<!-- Table include -->

						<form action="" method="POST" class="form-group" id="bpgrg-form">
							{% csrf_token %}
							<table class="table table-striped table-bordered table-sm">
								<thead class="thead-dark">
									<tr>
										<th>First Name</th>
										<th>Last Name</th>
										<th>Email</th>
										<th>Company</th>
										<th>Supplier ID</th>
									</tr>
								</thead>
								<tbody>
									{{ formset.management_form }}
									{% for form in formset %}
									<tr>
										<td> {{ form.firstName }}</td>
										<td> {{ form.lastName }}</td>
										<td> {{ form.email }}</td>
										<td> {{ form.company }}</td>
										<td> {{ form.supplierId }}</td>
										{% if form.responseText %}
										<td style="color: red;font-size:small;">{{form.responseText}}</td>
										{% endif %}
										{% if forloop.counter == formset.total_form_count or formset.total_form_count == 1 %}
										<td>
											<div class="input-group-append">
												<input type="hidden" value="false" name="additems" id="additems">
												<button class="btn btn-success" id="additemsbutton">+</button>
											</div>
										</td>
										{% endif %}
										{% if forloop.counter == formset.total_form_count and formset.total_form_count > 1 %}
										<td>
											<div class="input-group-append">
												<input type="hidden" value="false" name="removeitems" id="removeitems">
												<button class="btn btn-danger" id="removeitemsbutton">-</button>
											</div>
										</td>
										{% endif %}
										
									</tr>
									
									{% endfor %}
								</tbody>
							</table>

							<input class="btn btn-primary" type="submit" value="Submit" id="btnSubmit">

						</form>
						<script>
		/*Adding Form Row*/
		$(document).ready(function () {
			$("#additemsbutton").on('click', function (event) {
				console.log("ADD ITEMS");
				
				var blankField = false;
				var inputs = document.querySelectorAll("input");
				for (var i = 0; i < inputs.length; i++) {
					if (inputs[i].value === "")
					{
						
						blankField=true}
					}
				if (blankField==false)$("#additems").val("true");

			});
			/*Removing Form Row*/
			$("#removeitemsbutton").on('click', function (event) {
				//console.log("REMOVE ITEMS");
				$("#removeitems").val("true");
				var inputs = document.querySelectorAll("input");
				//console.log(inputs.length );
				for (var i = 0; i < inputs.length; i++) {
					if (inputs[i].value === "") {
						//console.log("it's an empty textfield"+inputs[i].id);						
						inputs[i].required = false;
					}
				}
			});
		});

		$('#bpgrg-form').submit( function(event) {
    // disable to avoid double submission
    $('#btnSubmit').attr('disabled', true);
	$('#btnSubmit').val('Please Wait');
});
						</script>
						<div class="row">
							<div class="col-md-12" style="margin-left: 15px;">
								<div id="accessTableId">

								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>

		<!-- end page-section-->

		<!-- end #main-inner -->


		<!-- End #page -->
	</div>
	<!-- Begin Footer -->
	<div id="footer" class="footer">
		<div class="section">
		</div>
	</div>
</body>

</html>